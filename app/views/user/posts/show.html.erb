<div class="card" style="width: 100%; margin: 0 auto;">

  <div class="card-body">
    <h5 class="card-title">タイトル:<%= @post.title %></h5>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">会社名：<%= @post.employee.company.company_name %>　店舗名：<%= @post.employee.store.name %>店　投稿者：<%= @post.employee.last_name %>　<%= @post.employee.first_name %></li>


    <li class="list-group-item">車名：<%= @post.car_name.name if @post.car_name.present? %>　型式：<%= @post.car_name.car_type if @post.car_name.present? %>　ジャンル：<%= @post.genre.name if @post.genre.present? %></li>

  </ul>

  <% if @post.images.attached? %>
     <div style="text-align: center;">
      <% @post.images.distinct.each do |image| %>
       <%= image_tag(image, width: "50%") %>
      <% end %>
     </div>
  <% elsif @post.video.attached? %>
        <div class='file-container'>
          <%= video_tag rails_blob_path(@post.video), controls: true, class: 'responsive-video rounded', width: '100%' %>
        </div>
  <% end %>

  <div class="card-body">

    <p class="card-text">説明文：<%= @post.caption %></p>

    <p class="card-text"><small class="text-muted">投稿日：<%= @post.created_at.strftime('%Y/%m/%d') %></small></p>

    <p><%= link_to "#{@post.post_comments.count} コメント", post_path(@post.id) %></p>


  </div>
  <div class="card-body">
      <div class="btn-group" role="group" aria-label="Basic example">
             <%= link_to '投稿一覧へ', posts_path(@post.id), class: "btn btn-outline-primary" %>

              <% if @post.employee_id == current_employee.id %>
               <%= link_to '編集', edit_post_path(@post.id), class: "btn btn-outline-success" %>
               <%= button_to '削除', @post, method: :delete, data: { confirm: '削除してよろしいですか?' }, class: "btn btn-outline-danger" %>
              <% end %>
      </div>
    </div>
    <div>
     <p>コメント件数：<%= @post.post_comments.count %></p>
     <p>いいね件数：<%= @post.favorites.count %></p>
     <% @post.post_comments.each do |post_comment| %>

      <% if @employee.image.attached? %>
        <%= image_tag(@employee.image, class: "rounded-circle", style: "width: 100px; height: 100px;") %>
      <% else %>
        <%= image_tag("kougu.jpg", class: "rounded-circle", style: "width: 100px; height: 100px;") %>
      <% end %>
     <%= post_comment.employee.last_name %><%= post_comment.employee.first_name %>
     <%= post_comment.created_at.strftime('%Y/%m/%d') %><%= post_comment.comment %>
     <% if post_comment.employee == current_employee %>
      <div>
       <%= button_to "削除", post_post_comment_path(post_comment.post, post_comment), method: :delete %>
      </div>
     <% end %>
     <% if @post.favorited_by?(current_employee) %>
      <p>
        <%= link_to post_favorites_path(@post), method: :delete do %>
          ♥<%= @post.favorites.count %> いいね
        <% end %>
      </p>
      <% else %>
      <p>
        <%= link_to post_favorites_path(@post), method: :post do %>
          ♡<%= @post.favorites.count %> いいね
        <% end %>
      </p>
      <% end %>
     <% end %>
    </div>
   <div>
    <%= form_with(model:[@post, @post_comment], local: true) do |f| %>
     <%= f.text_area :comment, rows:'5',placeholder: "コメントをここに" %>
     <%= f.submit "送信する" %>
    <% end %>
   </div>
</div>
